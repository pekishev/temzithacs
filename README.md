# Temzit heat pump integration for Home Assistant
_Интеграция для управления тепловыми насосами ТЭМЗИТ в Home Assistant._

**Эта интеграция создает следующие платформы:**

| Platform | Description |
| -- | -- |
| `sensor` | Сенсоры температуры, мощности, протока, COP и другие параметры |
| `climate` | Управление отоплением дома с установкой целевой температуры |
| `water_heater` | Управление горячей водой с установкой целевой температуры |

## Возможности

- ✅ Мониторинг всех параметров теплового насоса
- ✅ Управление температурой отопления (0-50°C)
- ✅ Управление температурой ГВС (0-60°C)
- ✅ Автоматическое обновление данных каждые 30 секунд
- ✅ Поддержка локального протокола (без облака)
- ✅ Полная совместимость с Home Assistant 2024.1+

## Установка через HACS (рекомендуется)

1. Убедитесь, что [HACS](https://hacs.xyz/) установлен в вашей системе Home Assistant
2. Перейдите в **HACS** → **Integrations**
3. Нажмите на три точки (⋮) в правом верхнем углу
4. Выберите **Custom repositories**
5. Добавьте репозиторий:
   - **Repository**: `https://github.com/pekishev/temzithacs`
   - **Category**: `Integration`
6. Нажмите **Add**
7. Перезагрузите Home Assistant
8. Перейдите в **HACS** → **Integrations**
9. Найдите "Temzit heat pump" и нажмите **Download**
10. Перезагрузите Home Assistant еще раз

## Ручная установка

1. Откройте директорию конфигурации Home Assistant (где находится `configuration.yaml`)
2. Если нет папки `custom_components`, создайте её
3. В папке `custom_components` создайте новую папку `temzit`
4. Скачайте все файлы из папки `custom_components/temzit/` этого репозитория
5. Поместите скачанные файлы в созданную папку
6. Перезагрузите Home Assistant
7. В интерфейсе HA перейдите в **Настройки** → **Устройства и службы**, нажмите **+** и найдите "Temzit heat pump"

## Настройка

Настройка выполняется через UI:

1. Перейдите в **Настройки** → **Устройства и службы**
2. Нажмите **Добавить интеграцию** (кнопка в правом нижнем углу)
3. Найдите "Temzit heat pump"
4. Введите IP-адрес вашего теплового насоса в локальной сети
5. Нажмите **Отправить**

## Создаваемые сущности

### Сенсоры

- **Температура в доме** - текущая температура внутри помещения
- **Температура на улице** - температура наружного воздуха
- **Температура ГВС** - температура горячей воды
- **Подача** - температура подачи теплоносителя
- **Обратка** - температура обратки теплоносителя
- **Потребление** - потребляемая электрическая мощность (кВт)
- **Мощность нагрева** - выходная тепловая мощность (кВт)
- **COP** - коэффициент производительности (отношение мощности нагрева к потреблению)
- **Проток** - скорость потока теплоносителя (л/мин)
- **Компрессор 1** - частота работы компрессора (Гц)
- **Ошибка** - код ошибки устройства

### Климат

- **Обогрев дома** - управление системой отопления с возможностью установки целевой температуры

### Водонагреватели

- **Горячая вода** - управление системой ГВС с возможностью установки целевой температуры

## Управление

Интеграция поддерживает управление через интерфейс Home Assistant:

- **Установка температуры отопления**: через климат-устройство "Обогрев дома"
- **Установка температуры ГВС**: через водонагреватель "Горячая вода"

Все изменения применяются безопасно - интеграция получает текущие настройки устройства, изменяет только нужный параметр и отправляет все настройки обратно, сохраняя остальные параметры.

## Технические детали

- **Версия интеграции**: 2024.1.1
- **Минимальная версия Home Assistant**: 2024.1.0
- **Протокол**: TCP на порту 333
- **Класс IoT**: local_polling (локальное опрашивание)
- **Интервал обновления**: 30 секунд
- **Протокол устройства**: [HM_Protocol.pdf](https://temzit.ru/downloads/HM_Protocol.pdf)

## Отладка

Если возникли проблемы:

1. Проверьте логи Home Assistant: **Настройки** → **Система** → **Журналы**
2. Убедитесь, что IP-адрес правильный и устройство доступно в сети
3. Проверьте доступность порта 333:
   ```bash
   telnet <IP-адрес> 333
   ```
4. Создайте issue в [репозитории GitHub](https://github.com/pekishev/temzithacs/issues) с описанием проблемы и логами

## Вклад в проект

Вклад в проект приветствуется! Пожалуйста, прочитайте [руководство по участию](CONTRIBUTING.md) перед отправкой изменений.

## Лицензия

Этот проект распространяется под лицензией MIT. См. файл [LICENSE](LICENSE) для подробностей.

***

[integration_blueprint]: https://github.com/pekishev/temzithacs
[buymecoffeebadge]: https://img.shields.io/badge/buy%20me%20a%20coffee-donate-yellow.svg?style=for-the-badge
[commits-shield]: https://img.shields.io/github/commit-activity/y/pekishev/temzithacs.svg?style=for-the-badge
[commits]: https://github.com/pekishev/temzithacs/commits/main
[exampleimg]: example.png
[forum-shield]: https://img.shields.io/badge/community-forum-brightgreen.svg?style=for-the-badge
[forum]: https://community.home-assistant.io/
[license-shield]: https://img.shields.io/github/license/pekishev/temzithacs.svg?style=for-the-badge
[releases-shield]: https://img.shields.io/github/release/pekishev/temzithacs.svg?style=for-the-badge
[releases]: https://github.com/pekishev/temzithacs/releases
